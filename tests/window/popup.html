<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>New Window</title>
</head>
<body>
This is the popup window<br/>
<script>
  var enable = false;
  var gui = require('nw.gui');
  var win = gui.Window.get();
  win.on('close', function() {
    if (enable)
      this.close(true);
    else
      console.log('This window can not be closed.');
  });

  win.on('enter-fullscreen', function() {
    console.log('Enter fullscreen');
  });

  win.on('leave-fullscreen', function() {
    console.log('Leave fullscreen');
  });
</script>
<button onclick="javascript:enable = true;">Enable to be closed</button>
<br/>
<button onclick="win.leaveFullscreen()">Leave fullscreen</button>
</body>
</html>
